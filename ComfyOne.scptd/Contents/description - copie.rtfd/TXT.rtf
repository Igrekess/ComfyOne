{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\froman\fcharset0 Times-Bold;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;}
\paperw12240\paperh15840\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\sa280\partightenfactor0

\f0\b\fs28 \cf0 \expnd0\expndtw0\kerning0
This script, **ComfyOne**, integrates the **ComfyUI API** directly within **Capture One**, offering extensive control over AI-powered image generation through a highly customizable interface.  **ComfyOne** provides control over prompts, workflows, resolution, dual ControlNet support, IP-Adapter, and inpainting settings\'97all accessible directly from within Capture One.\
\
### Key Features\
\
1. **Server Configuration**: Connect to the ComfyUI server by specifying its URL, with a default of `127.0.0.1:8188`.\
\
2. **Workflow Management**: Dynamically loads available workflows from a specified folder, allowing users to select and execute a workflow from within Capture One. Pre-built examples are provided, but users can also create their own workflows tailored to specific needs, gaining full control over the various parameters available in Capture One by following the node naming convention.\
\
3. **Prompting System**: Define positive and negative prompts to guide the generated image content, and set seed values to control randomness, offering flexibility in achieving specific styles and moods.\
\
4. **Resolution and Denoising**: Choose from predefined resolution settings (Low, Mid, High) and set denoising levels to refine image clarity.\
\
5. **Masking Options**: Configure mask prompts to target specific areas of the image, with options for blur, expand, invert, or fill. These parameters allow fine control over how the generated image interacts with masked areas.\
\
6. **Dual ControlNet Integration**: **ComfyOne** supports two ControlNets (ControlNet A and B) simultaneously, each with customizable strength, start, and end parameters. ControlNet nodes are intended to control the image's composition and structure based on reference images. Users can also upload custom reference images that are independent of the selected Capture One variant, providing additional flexibility.\
\
7. **IP-Adapter Functionality**: Customize the IP-Adapter to stylize and enhance the aesthetic details of the generated image. Unlike ControlNet, which is primarily focused on composition, IP-Adapter is aimed at refining the stylistic elements. Users can upload different reference images for the IP-Adapter, enabling unique stylistic variations separate from the selected Capture One variant.\
\
8. **Inpainting Mode**: Inpainting settings enable targeted editing with blur and blending options for masks, ideal for refining specific areas of the generated image.\
\
### Node Naming and Automated Workflow Management\
\
To fully automate the workflow management through **ComfyOne**, users need to follow a precise naming convention for nodes within the JSON workflow. This format must adhere to the **ComfyUI API JSON** structure, allowing a separate Python script to dynamically manage parameters by locating and updating specific nodes based on these identifiers. \
\
**Pre-built workflow examples are provided**, but users are also encouraged to construct their own workflows to suit specific requirements. As long as the node naming convention is respected, users have access to all variable settings within Capture One.\
\
**Node Identifiers for Automation**:\
- **Prompt Control**:\
  - `PositivePromptAPI`\
  - `NegativePromptAPI`\
- **Image Generation**:\
  - `SeedAPI`\
  - `DenoiseAPI`\
  - `SrcImgAPI`\
  - `SaveImgAPI`\
- **Advanced Settings**:\
  - `turboOnAPI`\
  - `inpaintOnAPI`\
  - `resolutionAPI`\
- **Masking and Inpainting**:\
  - `maskAPI`\
  - `inpaintAPI`\
- **ControlNet Nodes**:\
  - `ctrlNetAAPI`\
  - `ctrlNetBAPI`\
  - `uploadImgCtrlNetA`\
  - `uploadImgCtrlNetB`\
- **IP-Adapter Node**:\
  - `ipAdapterAPI`\
  - `uploadImgipAdapter`\
\
### Workflow Tree with Adjustable Variables per Node\
Here is a breakdown of the node structure along with adjustable variables available within each:\
\
1. **PositivePromptAPI**: Adjust the positive prompt for image generation.\
2. **NegativePromptAPI**: Adjust the negative prompt to filter out unwanted elements.\
3. **SeedAPI**: Set the seed value to control randomness in the generated output.\
4. **DenoiseAPI**: Adjust the level of denoising for image refinement.\
5. **SrcImgAPI**: Source image input path for reference.\
6. **SaveImgAPI**: Path to save the output image.\
7. **turboOnAPI**: Boolean value to enable or disable Turbo mode.\
8. **inpaintOnAPI**: Boolean value to enable or disable inpainting mode.\
9. **resolutionAPI**: Set the resolution (Low, Mid, High).\
10. **maskAPI**: Set mask prompts, blur level, expansion, inversion, and fill options.\
11. **inpaintAPI**: Parameters to control blur and blend options for inpainting.\
12. **ctrlNetAAPI / ctrlNetBAPI**: ControlNet A and B settings, including strength, start, and end points.\
13. **uploadImgCtrlNetA / uploadImgCtrlNetB**: Upload custom reference images for ControlNet A and B.\
14. **ipAdapterAPI**: Set IP-Adapter parameters, including strength and positions.\
15. **uploadImgipAdapter**: Upload a reference image for the IP-Adapter.\
\
### Script Execution and Generation from Capture One\
\
A second script allows users to **launch the image generation directly from the Capture One window**, using saved parameters. This ensures that users can quickly iterate on their creative process without needing to reconfigure settings every time.\
\
### Installation Script\
\
**ComfyOne** includes an installation script that sets up a **virtual environment (venv)** and installs all the necessary libraries automatically. This makes the installation process straightforward, ensuring that all dependencies are properly configured.\
\
### User Interface and Configuration\
\
The script uses **AppleScript\'92s Dialog Toolkit Plus** and **PrefsStorageLib** to create a smooth user interface within Capture One, allowing users to manage their inputs and save their preferences. Users can:\
- Save or load configurations.\
- Toggle between various options.\
- Preview and execute workflows.\
\
### Workflow Execution\
\
After configuring the settings, users can run the script to:\
- Apply chosen parameters to the diffusion model on the ComfyUI server.\
- Save their configuration for easy repeatability.\
\
**ComfyOne** is an essential tool for professionals looking to integrate AI-driven image generation into their workflow. It provides comprehensive control over composition via ControlNet and stylization via IP-Adapter, while also offering full automation through precise node naming within the **ComfyUI API JSON** format. This setup allows extensive creative freedom, with every control accessible directly from within Capture One.}